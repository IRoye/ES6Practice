<!--
 * @Descripttion: 
 * @Author: yuyi
 * @Date: 2019-06-02 13:48:46
 * @LastEditors: yuyi
 * @LastEditTime: 2020-10-30 01:05:41
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        let data = [{
            id: 10,
            hidden: true,
            children: [
                {
                    id: 11,
                    hidden: true
                },
                {
                    id: 12,
                    hidden: false
                }
            ]
        }, {
            id: 20,
            hidden: false,
            children: [
                {
                    id: 21,
                    hidden: true
                },
                {
                    id: 22,
                    hidden: false
                }
            ]
        }];
        // let result = f(data)
        // console.log(result)
        // function f(data) {
        //     return data.filter((element) => {
        //         if (!element.hidden) {
        //             return false
        //         } else if (element.hidden) {
        //             if (element.children && element.children.length > 0) {
        //                 element.children = f(element.children)
        //             }
        //             return true
        //         }
        //     })
        // };
        // 递归过滤
        function filter2(data, empty = []) {
            if (data && data.length !== 0) {
                for (let i = 0; i < data.length; i++) {
                    if (data[i].hidden === false) {
                        if (data[i].children) {
                            data[i].children = filter2(data[i].children, [])
                            empty.push(data[i])
                        } else {
                            empty.push(data[i])
                        }
                    }
                }
            }
            return empty
        }
        const result = filter2(data, [])
        console.log(result)
    </script>
</body>

</html>